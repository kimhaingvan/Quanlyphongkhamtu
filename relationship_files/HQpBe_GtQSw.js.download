if (self.CavalryLogger) { CavalryLogger.start_js(["IERyj"]); }

__d("ImageUtils",["UserAgent_DEPRECATED"],(function(a,b,c,d,e,f){var g="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAASUkqAAgAAAABABIBAwABAAAABgASAAAAAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAABAAIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+/iiiigD/2Q==",h=null;a={checkIfBrowserExifAutoRotationEnabled:function(a){if(h!=null){a(h);return}var b=new Image();b.onload=function(){h=b.width!==2,a(h)};b.onerror=function(){h=!1,a(h)};b.src=g},hasLoaded:function(a){if(a.naturalWidth!==void 0)return a.complete&&a.width!==0;else if(a.height==20&&a.width==20&&a.complete)return!1;else if(a.complete===void 0&&b("UserAgent_DEPRECATED").webkit()<500){var c=new Image();c.src=a.src;return c.complete}return a.complete}};e.exports=a}),null);
__d("PhotoLogger",["Banzai","BanzaiScuba","Event","SubscriptionsHandler"],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=a,this.$2={}}var c=a.prototype;c.log=function(a,c,d,e){b("Banzai").post("profile_photos_view",{photo_fbid:c,source:d,profile_id:e}),this.$2[a]||(this.$3(a),this.$2[a]=!0)};c.$3=function(a){this.$4("loading",{uri:a});var c=new(b("SubscriptionsHandler"))(),d=new Image();c.addSubscriptions(b("Event").listen(d,"load",function(){this.$4("loaded",{uri:a}),c.release()}.bind(this)),b("Event").listen(d,"error",function(){this.$4("error",{uri:a}),c.release()}.bind(this)),b("Event").listen(d,"abort",function(){this.$4("abort",{uri:a}),c.release()}.bind(this)));d.src=a};c.logEvent=function(a){this.$4(a)};c.$4=function(a,c){var d=new(b("BanzaiScuba"))("photos_client_loading",null,{addBrowserFields:!0});d.addNormal("event",a);d.addNormal("viewer",this.$1);for(var e in c)d.addNormal(e,c[e]);d.post()};return a}();e.exports=a}),null);
__d("PhotosConst",[],(function(a,b,c,d,e,f){a={VIEWER_PERMALINK:0,VIEWER_SNOWLIFT:6,VIEWER_VAULTBOX:8,VIEWER_SNOWFLAKE:14,VIEWER_COMPOSER:16,VIEWER_CAROUSEL:19,VIEWER_SPHERICAL:20,VIEWER_PERMALINK_STRING:"permalink",VIEWER_SNOWLIFT_STRING:"snowlift",VIEWER_VAULTBOX_STRING:"vaultbox",VIEWER_CAROUSEL_STRING:"carousel",BULK_EDITOR:3,BULK_EDITOR_REACT:15,EDITOR_MODAL:17,FLASH_UPLOADER:4,HTML5_UPLOADER:10,SIZE_NORMAL:"n",PIC_NORMAL_FBX_SIZE:180,ALBUM_NAME_MAXLEN:65};e.exports=a}),null);
__d("PhotosUtils",["Vector"],(function(a,b,c,d,e,f){e.exports=a;function a(){}Object.assign(a,{getNearestBox:function(a,b){var c=Infinity,d=null;for(var e in a){var f=a[e];if(f.contains(b)){f=b.distanceTo(f.getCenter());f<c&&(c=f,d=e)}}return d},absoluteToNormalizedPosition:function(a,c){var d=b("Vector").getElementPosition(a);a=b("Vector").getElementDimensions(a);c=c.sub(d).mul(100/a.x,100/a.y);c.domain="pure";return c},normalizedToAbsolutePosition:function(a,c){var d=b("Vector").getElementPosition(a);a=b("Vector").getElementDimensions(a);c=c.mul(a.x/100,a.y/100).add(d);c.domain="document";return c},isFacebox:function(a){return a.match(/^face:/)},isTag:function(a){return a.match(/^tag:/)}})}),null);
__d("SphericalMediaActionNamespaces",[],(function(a,b,c,d,e,f){"use strict";a="BASE";f.BASE=a;b="CORE";f.CORE=b;c="PHOTO";f.PHOTO=c;d="PHOTO_EDIT";f.PHOTO_EDIT=d;e="VIEW";f.VIEW=e}),null);
__d("SphericalMediaActions",[],(function(a,b,c,d,e,f){"use strict";a="TURN_ON";f.TURN_ON=a;b="TURN_OFF";f.TURN_OFF=b;c="ENABLE_SPHERICAL";f.ENABLE_SPHERICAL=c;d="DISABLE_SPHERICAL";f.DISABLE_SPHERICAL=d;e="REQUEST_PHOTO_FAILED";f.REQUEST_PHOTO_FAILED=e;a="REQUEST_PHOTO";f.REQUEST_PHOTO=a;b="RECEIVE_PHOTO";f.RECEIVE_PHOTO=b;c="UPDATE_BASE";f.UPDATE_BASE=c;d="DRAG_START";f.DRAG_START=d;e="GYRO_START";f.GYRO_START=e;a="ZOOM_START";f.ZOOM_START=a;b="SIGNIFICANT_MOVE";f.SIGNIFICANT_MOVE=b;c="MOUSE_ANIMATION_START";f.MOUSE_ANIMATION_START=c;d="MOUSE_ENTER";f.MOUSE_ENTER=d;e="TAP_HEADING_INDICATOR";f.TAP_HEADING_INDICATOR=e;a="VIEWPORT_CLICKED";f.VIEWPORT_CLICKED=a;b="VISIBILITY_CHANGED";f.VISIBILITY_CHANGED=b;c="UPDATE_DIMENSION";f.UPDATE_DIMENSION=c;d="UPDATE_INITIAL_FOV";f.UPDATE_INITIAL_FOV=d;e="UPDATE_INITIAL_VIEWPORT";f.UPDATE_INITIAL_VIEWPORT=e;a="SETUP_RENDERER";f.SETUP_RENDERER=a;b="WEBGL_CONTEXT_LOST";f.WEBGL_CONTEXT_LOST=b;c="WEBGL_INIT_FAILED";f.WEBGL_INIT_FAILED=c;d="WEBGL_RENDER_FAILED";f.WEBGL_RENDER_FAILED=d;e="SOURCE_ONLOAD";f.SOURCE_ONLOAD=e;a="REPLACE_BASE_STATE";f.REPLACE_BASE_STATE=a;b="UPDATE_CTR_ELEM";f.UPDATE_CTR_ELEM=b;c="SHOW_FALLBACK";f.SHOW_FALLBACK=c;d="FALLBACK_MOUSE_OVER";f.FALLBACK_MOUSE_OVER=d;e="FALLBACK_MOUSE_OUT";f.FALLBACK_MOUSE_OUT=e;a="FALLBACK_INDICATOR_MOUSE_OVER";f.FALLBACK_INDICATOR_MOUSE_OVER=a;b="FALLBACK_INDICATOR_MOUSE_OUT";f.FALLBACK_INDICATOR_MOUSE_OUT=b;c="UPDATE_PARTIAL_LIMITS";f.UPDATE_PARTIAL_LIMITS=c;d="USE_FALLBACK";f.USE_FALLBACK=d;e="UPDATE_VIEW";f.UPDATE_VIEW=e;a="UPDATE_VIEWPORT";f.UPDATE_VIEWPORT=a;b="UPDATE_FOV";f.UPDATE_FOV=b;c="UPDATE_YAW";f.UPDATE_YAW=c;d="UPDATE_VIEWPORT_AND_FOV";f.UPDATE_VIEWPORT_AND_FOV=d;e="START_ANIMATING";f.START_ANIMATING=e;a="STOP_ANIMATING";f.STOP_ANIMATING=a;b="UPDATE_FEED_ROOT_ELEMENT";f.UPDATE_FEED_ROOT_ELEMENT=b;c="UPDATE_PHOTO_EDIT";f.UPDATE_PHOTO_EDIT=c;d="CANCEL_EDITING";f.CANCEL_EDITING=d;e="START_EDITING";f.START_EDITING=e;a="STOP_EDITING";f.STOP_EDITING=a;b="UPDATE_PHOTO";f.UPDATE_PHOTO=b;c="UPDATE_PHOTO_FAILED";f.UPDATE_PHOTO_FAILED=c;d="UPDATE_PHOTO_DONE";f.UPDATE_PHOTO_DONE=d;e=108;f.UPDATE_RENDERER_PROJECTION_TYPE=e;a=109;f.UPDATE_RENDERER_PROJECTION_TYPE_FAILED=a;b=110;f.UPDATE_RENDERER_PROJECTION_TYPE_DONE=b;c="RESET_MOUSE_ANIMATION";f.RESET_MOUSE_ANIMATION=c;d="START_MOUSE_ANIMATION";f.START_MOUSE_ANIMATION=d;e="STOP_MOUSE_ANIMATION";f.STOP_MOUSE_ANIMATION=e;a="DISABLE_SPHERICAL_ON_SAVE";f.DISABLE_SPHERICAL_ON_SAVE=a;b="ENABLE_SPHERICAL_ON_SAVE";f.ENABLE_SPHERICAL_ON_SAVE=b;c="ENABLE_EDITING";f.ENABLE_EDITING=c;d="DISABLE_EDITING";f.DISABLE_EDITING=d;e="TAKE_STATE_SNAPSHOT";f.TAKE_STATE_SNAPSHOT=e;a="RESTORE_EDIT_STATE_FROM_SNAPSHOT";f.RESTORE_EDIT_STATE_FROM_SNAPSHOT=a;b="RESTORE_TAGS_STATE_FROM_SNAPSHOT";f.RESTORE_TAGS_STATE_FROM_SNAPSHOT=b;c="REMOVE_STATE_SNAPSHOT";f.REMOVE_STATE_SNAPSHOT=c;d="PHOTO_REMOVED";f.PHOTO_REMOVED=d;e="UPDATE_FILE_URL";f.UPDATE_FILE_URL=e;a="SET_VR_IS_PRESENTING";f.SET_VR_IS_PRESENTING=a;b="SET_VR_DEVICE";f.SET_VR_DEVICE=b;c="SET_VR_RENDERING_SUPPORTED";f.SET_VR_RENDERING_SUPPORTED=c;d="SET_VR_RENDERER_IS_READY";f.SET_VR_RENDERER_IS_READY=d;e="CANVAS_RESIZE_START";f.CANVAS_RESIZE_START=e;a="CANVAS_RESIZE_IMG_LOADED";f.CANVAS_RESIZE_IMG_LOADED=a;b="CANVAS_RESIZE_SUCCESS";f.CANVAS_RESIZE_SUCCESS=b;c="CANVAS_RESIZE_FAILED";f.CANVAS_RESIZE_FAILED=c;d="OPEN_TAG_DIALOG";f.OPEN_TAG_DIALOG=d;e="CLOSE_TAG_DIALOG";f.CLOSE_TAG_DIALOG=e;a="SAVE_DIALOG_TAGS";f.SAVE_DIALOG_TAGS=a;b="CANCEL_DIALOG_TAG_CHANGES";f.CANCEL_DIALOG_TAG_CHANGES=b;c="PHOTO_RENDERER_STATS";f.PHOTO_RENDERER_STATS=c;d="ENABLE_TAGGING";f.ENABLE_TAGGING=d;e="DISABLE_TAGGING";f.DISABLE_TAGGING=e;a="UPDATE_SPATIAL_TAGS";f.UPDATE_SPATIAL_TAGS=a;b="UPDATE_SPATIAL_TAGS_FROM_COMPOSER";f.UPDATE_SPATIAL_TAGS_FROM_COMPOSER=b;c="UPDATE_TAG_UNDER_MOUSE";f.UPDATE_TAG_UNDER_MOUSE=c;d="TAGGING_START";f.TAGGING_START=d;e="TAGGING_STOP";f.TAGGING_STOP=e;a="UPDATE_TAG_CLICKED";f.UPDATE_TAG_CLICKED=a;b="UPDATE_TAGGER";f.UPDATE_TAGGER=b;c="ENTER_TAGGING_MODE";f.ENTER_TAGGING_MODE=c;d="EXIT_TAGGING_MODE";f.EXIT_TAGGING_MODE=d;e="UPDATE_TARGETED_TAG";f.UPDATE_TARGETED_TAG=e;a="REDIRECT_FROM_CLICKED_TAG";f.REDIRECT_FROM_CLICKED_TAG=a;b="DELETED_SPATIAL_TAG";f.DELETED_SPATIAL_TAG=b;c="ADD_SPATIAL_TAG_FROM_PHOTO_TAGGER";f.ADD_SPATIAL_TAG_FROM_PHOTO_TAGGER=c}),null);
__d("SphericalMediaBaseActions",["SphericalMediaActionNamespaces","SphericalMediaActions"],(function(a,b,c,d,e,f){"use strict";f.dragStart=a;f.gyroStart=c;f.mouseAnimationStart=d;f.mouseEnter=e;f.tapHeadingIndicator=g;f.significantMove=h;f.viewportClicked=i;f.visibilityChanged=j;f.zoomStart=k;f.webGlInitFailed=l;f.webGlRenderFailed=m;f.webGlContextLost=n;f.canvasResizeStart=o;f.canvasResizeImgLoaded=p;f.canvasResizeSuccess=q;f.canvasResizeFailed=r;f.addSpatialTagFromPhotoTagger=s;f.updateCtrElem=t;f.showFallbackUI=u;f.useFallbackUI=v;a=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_BASE,data:a}};f.updateBase=a;function a(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").DRAG_START}}function c(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").GYRO_START}}function d(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").MOUSE_ANIMATION_START}}function e(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").MOUSE_ENTER}}function g(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").TAP_HEADING_INDICATOR}}function h(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").SIGNIFICANT_MOVE,data:{view:a}}}function i(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").VIEWPORT_CLICKED}}function j(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").VISIBILITY_CHANGED,data:a}}function k(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").ZOOM_START}}c=function(a,c){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_DIMENSION,data:{width:a,height:c}}};f.updateDimension=c;d=function(a,c){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_INITIAL_VIEWPORT,data:{initialYaw:a,initialPitch:c}}};f.updateInitialViewport=d;e=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_INITIAL_FOV,data:{initialFov:a}}};f.updateInitialFOV=e;g=function(a,c){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").SETUP_RENDERER,data:{renderer:a,dt:c}}};f.setupRenderer=g;function l(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").WEBGL_INIT_FAILED,data:{error:a}}}function m(a,c){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").WEBGL_RENDER_FAILED,data:{error:a,view:c}}}function n(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").WEBGL_CONTEXT_LOST}}h=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").SOURCE_ONLOAD}};f.sourceOnLoad=h;i=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").REPLACE_BASE_STATE,data:a}};f.replaceBaseState=i;j=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_SPATIAL_TAGS,data:a}};f.updateSpatialTags=j;k=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_SPATIAL_TAGS_FROM_COMPOSER,data:a}};f.updateSpatialTagsFromComposer=k;l=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_TAG_UNDER_MOUSE,data:a}};f.updateTagUnderMouse=l;m=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_FILE_URL,data:a}};f.updateFileURL=m;function o(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").CANVAS_RESIZE_START}}function p(a,c){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").CANVAS_RESIZE_IMG_LOADED,data:{width:a,height:c}}}function q(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").CANVAS_RESIZE_SUCCESS,data:a}}function r(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").CANVAS_RESIZE_FAILED,data:a}}n=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").ENABLE_TAGGING}};f.enableTagging=n;o=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").DISABLE_TAGGING}};f.disableTagging=o;p=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").TAGGING_START}};f.taggingStart=p;q=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").TAGGING_STOP}};f.taggingStop=q;r=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_TAG_CLICKED,data:a}};f.updateTagClicked=r;s=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_TAGGER,data:a}};f.updateTagger=s;t=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").ENTER_TAGGING_MODE}};f.enterTaggingMode=t;u=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").EXIT_TAGGING_MODE}};f.exitTaggingMode=u;v=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_TARGETED_TAG,data:a}};f.updateTargetedTag=v;a=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").REDIRECT_FROM_CLICKED_TAG}};f.redirectFromClickedTag=a;c=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").DELETED_SPATIAL_TAG}};f.deletedSpatialTag=c;function s(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").ADD_SPATIAL_TAG_FROM_PHOTO_TAGGER}}function t(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_CTR_ELEM,data:{element:a}}}function u(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").SHOW_FALLBACK}}d=function(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").REQUEST_PHOTO}};f.requestPhoto=d;e=function(a,c){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").REQUEST_PHOTO_FAILED,data:{id:a,error:c}}};f.requestPhotoFailed=e;g=function(a,c){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").RECEIVE_PHOTO,data:c}};f.receivePhoto=g;h=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_PARTIAL_LIMITS,data:a}};f.updatePartialLimits=h;function v(){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").USE_FALLBACK}}i=function(a){return{namespace:b("SphericalMediaActionNamespaces").BASE,type:b("SphericalMediaActions").UPDATE_FEED_ROOT_ELEMENT,data:a}};f.updateFeedRootElement=i}),null);
__d("ReactComponentRenderer",["React","ReactDOM","warning"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(){function a(a,b){this.klass=a,this.container=b,this.props={},this.component=null}var c=a.prototype;c.replaceProps=function(a,b){this.props={},this.setProps(a,b)};c.setProps=function(a,c){if(this.klass==null)return;Object.assign(this.props,a);a=g.createElement(this.klass,this.props);var d=this;b("ReactDOM").render(a,this.container,function(){d.component=this,c&&c.call(this)})};c.unmount=function(){b("ReactDOM").unmountComponentAtNode(this.container),this.klass=null};return a}();e.exports=a}),null);