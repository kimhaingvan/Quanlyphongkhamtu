if (self.CavalryLogger) { CavalryLogger.start_js(["45Lf5"]); }

__d("PlatformBusinessAppAuthLogger",["BanzaiLogger","CurrentUser"],(function(a,b,c,d,e,f){"use strict";f.logEvent=a;function a(a){b("BanzaiLogger").create({delay:0}).log("PlatformBusinessLoginLoggerConfig",{vc:b("CurrentUser").getAccountID(),event:a.event,app_id:a.appID,logger_id:a.loggerID,dialog_name:a.dialogPurpose,display:a.display,step:a.stepID,time_in_step:a.timeInStep,redirect_uri:a.redirectURI.toString(),requested_scopes:a.allUserScopes,requested_asset_scopes:a.allAssetScopes,granted_scopes:a.grantedScopes,granted_asset_scopes:a.grantedAssetScopes,all_assets:a.allAssets,granted_assets:a.grantedAssets})}}),null);
__d("PlatformBusinessStepUtils",[],(function(a,b,c,d,e,f){"use strict";f.isFrameworkStep=a;f.isFrameworkStepID=b;f.getAssetsByType=c;f.getScopesByManagedAssetType=d;f.getAssetTypeForStep=e;f.getSelectedAssets=g;f.getSelectedScopes=h;f.getMergedScopes=i;f.setScopeDependencies=j;function a(a){return this.isFrameworkStepID(a.id)}function b(a){return a==="user"||a==="whatsapp_business_assets"||a==="commerce_account_assets"||a==="instagram_business_assets"||a==="business_assets"||a==="page_assets"||a==="permissions"||a==="save"||a==="finish"}function c(a){var b={};for(var c in a){var d=a[c],e=b[d.type];e==null&&(e=[]);e.push(c);b[d.type]=e}return b}function d(a){var b={};a.forEach(function(a){var c=b[a.managedAssetType];c==null&&(c=[]);c.push(a.scope);b[a.managedAssetType]=c});return b}function e(a){switch(a){case"whatsapp_business_assets":return 15179;case"commerce_account_assets":return 4043;case"instagram_business_assets":return 6057;case"business_assets":return 1378;case"page_assets":return 274;default:throw new Error("Invalid stepID provided")}}function g(a,b){b===void 0&&(b=null);var c=[];for(var d in a){var e=a[d];(!b||e.type===b)&&e.checked===!0&&c.push(d)}return c}function h(a){var b=[];for(var c in a){var d=a[c];d.checked===!0&&b.push(d.scope)}return b}function i(a,b){var c={};for(var d in a)c[d]=a[d];for(var e in b)if(e in c){a=c[e].managedAssetIDs.concat(b[e].managedAssetIDs);c[e].managedAssetIDs=a.filter(function(a,b,c){return c.indexOf(a)==b});c[e].checked=c[e].checked||b[e].checked;c[e].disabled=!c[e].checked}else c[e]=b[e];return c}function j(a,b){var c,d=["manage_pages","pages_read_engagement","pages_read_user_content","pages_manage_ads","pages_manage_metadata"];b!=="manage_pages"&&((c=a.publish_pages)==null?void 0:c.checked)&&a.manage_pages&&(a.manage_pages.checked=!0);b!=="pages_show_list"&&d.some(function(b){return(b=a[b])==null?void 0:b.checked})&&a.pages_show_list&&(a.pages_show_list.checked=!0);!d.includes(b)&&a.pages_show_list&&!a.pages_show_list.checked&&d.forEach(function(b){a[b]&&(a[b].checked=!1)});b!=="publish_pages"&&a.manage_pages&&!a.manage_pages.checked&&a.publish_pages&&(a.publish_pages.checked=!1);b!=="pages_manage_posts"&&a.pages_read_engagement&&!a.pages_read_engagement.checked&&a.pages_manage_posts&&(a.pages_manage_posts.checked=!1);b!=="pages_read_engagement"&&((c=a.pages_manage_posts)==null?void 0:c.checked)&&a.pages_read_engagement&&(a.pages_read_engagement.checked=!0);b!=="pages_manage_engagement"&&a.pages_read_user_content&&!a.pages_read_user_content.checked&&a.pages_manage_engagement&&(a.pages_manage_engagement.checked=!1);b!=="pages_read_user_content"&&((d=a.pages_manage_engagement)==null?void 0:d.checked)&&a.pages_read_user_content&&(a.pages_read_user_content.checked=!0);return a}}),null);
__d("XPlatformBusinessOauthDialogAsyncLogOutController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/dialog/oauth/business/logout/",{display:{type:"Enum",enumType:1},redirect_uri:{type:"String",required:!0}})}),null);
__d("PlatformBusinessOauthDialogComponents",["cx","fbt","AsyncRequest","DTSG","FDSButton.react","FDSDropdownSelector.react","FDSDropdownSelectorOption.react","FDSLink.react","FDSProgressBar.react","Image.react","PlatformBusinessAppAuthLogger","PlatformBusinessStepUtils","React","ScaledImage.react","SUIAtlasTheme","SUIButton.react","TetraButton.react","TetraText.react","URI","XPlatformBusinessOauthDialogAsyncLogOutController","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React"),k=b("gkx")("1069795"),l=24,m="/images/platform/dialog/oauth/consumer/gdpv5/fbIcon_round_gradient.png",n="/images/platform/dialog/oauth/consumer/gdpv5/connectorIcon.png";a=function(a,c,d,e,f){a=j.jsx("form",{method:"POST",ref:c,children:j.jsx("input",{type:"hidden",name:"fb_dtsg",value:b("DTSG").getToken()})});return j.jsxs("div",{className:"_6lqn",style:{width:562+"px",height:670+"px"},children:[a,d,e,f]})};f.renderDialogContainer=a;c=function(a){return j.jsxs("div",{className:"_83hw",children:[j.jsx(b("ScaledImage.react"),{className:"_83hy",height:l,imageSize:{height:l,width:l},src:m,width:l}),j.jsx(b("Image.react"),{className:"_8m84 _3-8t",src:n}),j.jsx(b("ScaledImage.react"),{className:"_83hy",height:l,imageSize:{height:l,width:l},src:a,width:l})]})};f.renderAppLogoView=c;d=function(a){return null};f.renderHeaderCancelButton=d;e=function(a,b,c){b=a.shouldHideFooter?{flexGrow:"1"}:{};return j.jsx("div",{className:"_6-wr",style:b,children:c})};f.renderWrappedContent=e;g=function(a,c,d){return a.currentStepIndex<a.steps.length-1?j.jsx("div",{className:a.currentStepIndex>0?"_6-bt":"",children:j.jsx(b("FDSProgressBar.react"),{progress:100*d/c,roundedBorder:!1,background:"transparent",type:"loading",height:"small"})}):null};f.renderProgressBar=g;a=function(a,c,d){return d==="user"||d==="save"?null:j.jsx("div",{className:"_8d7w",children:j.jsx(b("FDSDropdownSelector.react"),{buttonUse:"flat",onChange:function(){},placeholder:c.user.name,value:null,children:j.jsx(b("FDSDropdownSelectorOption.react"),{value:"logout",onSelect:function(){var e={event:"switch_account",appID:c.application.id,loggerID:c.loggerID,dialogPurpose:c.dialogPurpose,display:c.display,stepID:d,timeInStep:Date.now()-a.stepStartTimeStamp,redirectURI:c.redirectURI,allUserScopes:Object.keys(c.userScopes),grantedScopes:b("PlatformBusinessStepUtils").getSelectedScopes(a.userScopes),allAssetScopes:Object.keys(c.assetScopes),grantedAssetScopes:b("PlatformBusinessStepUtils").getSelectedScopes(a.assetScopes),allAssets:Object.keys(c.assets),grantedAssets:b("PlatformBusinessStepUtils").getSelectedAssets(a.assets)};b("PlatformBusinessAppAuthLogger").logEvent(e);e=b("XPlatformBusinessOauthDialogAsyncLogOutController").getURIBuilder().setString("redirect_uri",c.logOutNextURI).setEnum("display",c.display).getURI();var f=new(b("AsyncRequest"))();f.setURI(e).setHandler(function(a){window.location.replace(a.payload)}).send()},children:"Log into another account"})})})};f.renderLogoutSelector=a;c=function(a,c,d,e,f,g,i,l){if(c.shouldHideFooter)return void 0;var m;d==="user"?m=h._("Ti\u1ebfp t\u1ee5c d\u01b0\u1edbi t\u00ean {User's name}",[h._param("User's name",a.user.name)]):d==="finish"?m=c.saveData.success?h._("OK"):h._("\u0110\u00f3ng"):!e?m=h._("Xong"):m=h._("Ti\u1ebfp");e=c.currentStepIndex===0?j.jsx("div",{className:"_6z7j",children:j.jsx("span",{children:j.jsxs(b("TetraText.react"),{color:"secondary",type:"body2",children:[h._("Kh\u00f4ng ph\u1ea3i {User's name}",[h._param("User's name",a.user.name)]),"?"," ",j.jsx(b("FDSLink.react"),{onClick:function(){var e={event:"switch_account",appID:a.application.id,loggerID:a.loggerID,dialogPurpose:a.dialogPurpose,display:a.display,stepID:d,timeInStep:Date.now()-c.stepStartTimeStamp,redirectURI:a.redirectURI,allUserScopes:Object.keys(a.userScopes),grantedScopes:b("PlatformBusinessStepUtils").getSelectedScopes(c.userScopes),allAssetScopes:Object.keys(a.assetScopes),grantedAssetScopes:b("PlatformBusinessStepUtils").getSelectedScopes(c.assetScopes),allAssets:Object.keys(a.assets),grantedAssets:b("PlatformBusinessStepUtils").getSelectedAssets(c.assets)};b("PlatformBusinessAppAuthLogger").logEvent(e);e=b("XPlatformBusinessOauthDialogAsyncLogOutController").getURIBuilder().setString("redirect_uri",a.logOutNextURI).setEnum("display",a.display).getURI();var f=new(b("AsyncRequest"))();f.setURI(e).setHandler(function(a){window.location.replace(a.payload)}).send()},children:j.jsx(b("TetraText.react"),{color:"highlight",type:"body2",children:h._("\u0110\u0103ng nh\u1eadp b\u1eb1ng t\u00e0i kho\u1ea3n kh\u00e1c.")})})]})})}):null;var n=d==="finish";f=c.currentStepIndex<=1||n?null:k?j.jsx("div",{style:{width:"115px",marginRight:"4px"},children:j.jsx(b("TetraButton.react"),{testid:void 0,label:h._("Quay l\u1ea1i"),size:"medium",type:"secondary",onPress:f})}):j.jsx("div",{className:"_6o75",children:j.jsx(b("FDSButton.react"),{label:h._("Quay l\u1ea1i"),"data-testid":void 0,size:"large",onClick:f})});var p=k?j.jsx("div",{style:{width:c.currentStepIndex>0?"115px":"50%",marginLeft:"4px"},children:j.jsx(b("TetraButton.react"),{testid:void 0,disabled:c.shouldDisableNext,label:m,size:"medium",type:"primary",onPress:g})}):j.jsx(b("FDSButton.react"),{isDisabled:c.shouldDisableNext,style:{flexGrow:1,marginLeft:"12px"},"data-testid":void 0,label:m,size:"large",use:"primary",onClick:g});n&&(k?p=c.saveData.success?j.jsx(b("TetraButton.react"),{testid:void 0,label:m,size:"large",type:"primary",onPress:g}):j.jsx(b("TetraButton.react"),{testid:void 0,label:m,size:"large",type:"secondary",onPress:g}):p=c.saveData.success?j.jsx(b("FDSButton.react"),{style:{flexGrow:1},width:"100%","data-testid":void 0,label:m,size:"large",use:"primary",onClick:g}):j.jsx(b("SUIButton.react"),{theme:b("SUIAtlasTheme"),style:{flexGrow:1},width:"100%","data-testid":void 0,label:m,use:"default",onClick:g}));n=d==="finish"?null:k?j.jsx("div",{style:{width:c.currentStepIndex>0?"115px":"50%",marginRight:"4px"},children:j.jsx(b("TetraButton.react"),{label:h._("H\u1ee7y"),type:"secondary",size:"medium",testid:void 0,onPress:l})}):j.jsx(b("FDSButton.react"),{style:{marginRight:"4px",flexGrow:c.currentStepIndex>0?0:1},label:h._("H\u1ee7y"),size:"large","data-testid":void 0,onClick:l});l=k?j.jsx("div",{style:{width:"50%",marginLeft:"4px"},children:j.jsx(b("TetraButton.react"),{testid:void 0,label:m,size:"medium",type:"primary",onPress:i})}):j.jsx(b("FDSButton.react"),{style:{flexGrow:1,marginLeft:"12px"},"data-testid":void 0,label:m,size:"large",use:"primary",onClick:i});m=k?j.jsx("div",{style:{width:"50%",marginRight:"4px"},children:j.jsx(b("TetraButton.react"),{label:h._("Ch\u1ec9nh s\u1eeda c\u00e0i \u0111\u1eb7t"),type:"secondary",size:"medium",testid:void 0,onPress:function(){g()}})}):j.jsx(b("FDSButton.react"),{style:{marginRight:"4px",flexGrow:1},label:h._("Ch\u1ec9nh s\u1eeda c\u00e0i \u0111\u1eb7t"),size:"large","data-testid":void 0,onClick:g});i=a.dialogPurpose==="reentry"&&c.currentStepIndex===0?m:n;m=a.dialogPurpose==="reentry"&&c.currentStepIndex===0&&!("manage_business_extension"in a.userScopes)?l:p;l=f===null&&c.currentStepIndex!==1||n===null?m:j.jsxs("div",{className:"_6o75",style:{flexGrow:c.currentStepIndex>0?0:1},children:[f,p]});n=d==="save"?null:j.jsxs("div",{className:"_6lqx",children:[j.jsxs("div",{className:"_6-v1",children:[i,l]}),e]});m=o(a.application);return j.jsxs("div",{className:"_6lqs",children:[n," ",m]})};f.renderFooter=c;var o=function(a){var c=a.privacyUrl?j.jsx(b("FDSLink.react"),{href:new(i||(i=b("URI")))(a.privacyUrl),target:"_blank",children:j.jsx(b("TetraText.react"),{color:"highlight",type:"body4",children:h._("Ch\u00ednh s\u00e1ch quy\u1ec1n ri\u00eang t\u01b0")})}):null,d=a.tosUrl?j.jsx(b("FDSLink.react"),{href:new(i||(i=b("URI")))(a.tosUrl),target:"_blank",children:j.jsx(b("TetraText.react"),{color:"highlight",type:"body4",children:h._("\u0110i\u1ec1u kho\u1ea3n")})}):null,e=null;if(c&&d)e=h._("{privacy policy link} v\u00e0 {terms of service link} c\u1ee7a {Application name}",[h._param("Application name",a.name),h._param("privacy policy link",c),h._param("terms of service link",d)]);else if(c||d){e=h._("{terms or policy link} c\u1ee7a {Application name}",[h._param("Application name",a.name),h._param("terms or policy link",(a=c)!=null?a:d)])}return j.jsx("div",{className:"_7mnf",children:j.jsxs("div",{className:"_6lqy",children:[j.jsx(b("TetraText.react"),{color:"primary",type:"body4",children:e}),j.jsx("div",{children:j.jsx(b("FDSLink.react"),{href:new(i||(i=b("URI")))("https://www.facebook.com/help/405094243235242"),target:"_blank",children:j.jsx(b("TetraText.react"),{color:"highlight",type:"body4",children:h._("Trung t\u00e2m tr\u1ee3 gi\u00fap")})})})]})})};f.renderFooterLinks=o}),null);
__d("XPlatformBusinessOauthDialogCloseController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/dialog/oauth/business/cancel/",{version:{type:"String"},logger_id:{type:"String",required:!0},display:{type:"Enum",enumType:1},action:{type:"Enum",required:!0,enumType:1},user_scopes:{type:"StringVector",defaultValue:[]},asset_scopes:{type:"EnumVector",defaultValue:[],enumType:{member:1}},app_id:{type:"FBID",required:!0},redirect_state:{type:"String"},redirect_uri:{type:"String",required:!0},fallback_redirect_uri:{type:"String"},response_types:{type:"EnumVector",required:!0,enumType:{member:1}},return_scopes:{type:"Bool",defaultValue:!1},sso_device:{type:"Enum",enumType:1},return_format:{type:"EnumVector",enumType:{member:1}}})}),null);
__d("PlatformBusinessOauthDialog.react",["cx","DateConsts","FBLogger","PlatformBusinessAppAuthLogger","PlatformBusinessOauthDialogComponents","PlatformBusinessStepUtils","PlatformOAuthDialogLoginFunnelLogger","QueryString","React","XPlatformBusinessOauthDialogCloseController"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=function(c){babelHelpers.inheritsLoose(a,c);function a(){var d,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(d=e=c.call.apply(c,[this].concat(g))||this,e.state={stepStartTimeStamp:Date.now(),clientBaselineTime:null,currentStepIndex:0,steps:e.props.steps,userScopes:e.props.userScopes,assetScopes:e.props.assetScopes,assets:e.props.assets,saveData:{success:e.props.installedRedirectURI!==null},shouldHideFooter:!1,shouldDisableNext:!1},e.escFunction=function(a){a.keyCode===27&&e.cancel()},e.cancelOnClick=function(){e.cancel("cancel")},e.$5=function(){var c={event:"reentry_instant_finish",appID:e.props.application.id,loggerID:e.props.loggerID,dialogPurpose:e.props.dialogPurpose,display:e.props.display,stepID:e.$1(),timeInStep:Date.now()-e.state.stepStartTimeStamp,redirectURI:e.props.redirectURI,allUserScopes:Object.keys(e.props.userScopes),grantedScopes:b("PlatformBusinessStepUtils").getSelectedScopes(e.state.userScopes),allAssetScopes:Object.keys(e.props.assetScopes),grantedAssetScopes:b("PlatformBusinessStepUtils").getSelectedScopes(e.state.assetScopes),allAssets:Object.keys(e.props.assets),grantedAssets:b("PlatformBusinessStepUtils").getSelectedAssets(e.state.assets)};b("PlatformBusinessAppAuthLogger").logEvent(c);c=b("XPlatformBusinessOauthDialogCloseController").getURIBuilder().setString("version",e.props.version).setString("logger_id",e.props.loggerID).setStringVector("user_scopes",Object.keys(e.props.userScopes)).setEnumVector("asset_scopes",Object.keys(e.props.assetScopes)).setFBID("app_id",e.props.application.id).setString("redirect_state",e.props.redirectState).setString("redirect_uri",e.props.redirectURI.toString()).setString("fallback_redirect_uri",e.props.fallbackRedirectURI===null?null:String(e.props.fallbackRedirectURI)).setEnumVector("response_types",e.props.responseTypes).setEnum("display",e.props.display).setEnum("action","reentry_finish").setBool("return_scopes",e.props.returnScopes).setEnum("sso_device",e.props.ssoDevice).setEnumVector("return_format",e.props.returnFormat).getURI();a.closeDialog(c)},e.$3=function(){var c=e.state.saveData;c={event:c.success?"finish_success":"finish_failure",appID:e.props.application.id,loggerID:e.props.loggerID,dialogPurpose:e.props.dialogPurpose,display:e.props.display,stepID:e.$1(),timeInStep:Date.now()-e.state.stepStartTimeStamp,redirectURI:e.props.redirectURI,allUserScopes:Object.keys(e.props.userScopes),grantedScopes:b("PlatformBusinessStepUtils").getSelectedScopes(e.state.userScopes),allAssetScopes:Object.keys(e.props.assetScopes),grantedAssetScopes:b("PlatformBusinessStepUtils").getSelectedScopes(e.state.assetScopes),allAssets:Object.keys(e.props.assets),grantedAssets:b("PlatformBusinessStepUtils").getSelectedAssets(e.state.assets)};b("PlatformBusinessAppAuthLogger").logEvent(c);c=b("XPlatformBusinessOauthDialogCloseController").getURIBuilder().setString("version",e.props.version).setString("logger_id",e.props.loggerID).setStringVector("user_scopes",Object.keys(e.props.userScopes)).setEnumVector("asset_scopes",Object.keys(e.props.assetScopes)).setFBID("app_id",e.props.application.id).setString("redirect_state",e.props.redirectState).setString("redirect_uri",e.props.redirectURI.toString()).setString("fallback_redirect_uri",(c=e.props.fallbackRedirectURI)==null?void 0:c.toString()).setEnumVector("response_types",e.props.responseTypes).setEnum("display",e.props.display).setEnum("action","finish").setBool("return_scopes",e.props.returnScopes).setEnum("sso_device",e.props.ssoDevice).setEnumVector("return_format",e.props.returnFormat).getURI();a.closeDialog(c)},e.$6=function(){e.$1()==="finish"?e.$3():e.advanceStep(!0)},e.$7=function(){return e.retreatStep(!0)},e.$8=function(a,b){e.setState(function(c){var d=c.assets;d[a]&&(d[a].checked=b,b&&e.$9([a],c.userScopes)&&e.$9([a],c.assetScopes));return{assets:d}})},e.$11=function(a){e.setState(function(b){var c=b.assets,d=b.assetScopes;b=b.userScopes;c[a.id]=a;return{assets:c,assetScopes:e.$10(d,a.type,a.id),userScopes:e.$10(b,a.type,a.id)}},function(){e.setState(function(b){e.$9([a.id],b.userScopes),e.$9([a.id],b.assetScopes)})})},e.$12=function(a){e.setState(function(b,c){for(var d in b.assets){c=a.includes(d);b.assets[d].checked=c}e.$9(a,b.userScopes);e.$9(a,b.assetScopes);return b})},e.$13=function(a,c){a in e.state.userScopes&&e.setState(function(d,e){d.userScopes[a].checked=c;d.userScopes=b("PlatformBusinessStepUtils").setScopeDependencies(d.userScopes,a);return d}),a in e.state.assetScopes&&e.setState(function(b,d){b.assetScopes[a].checked=c;return b})},e.$14=function(a){var c={event:a.success?"save_success":"save_failure",appID:e.props.application.id,loggerID:e.props.loggerID,dialogPurpose:e.props.dialogPurpose,display:e.props.display,stepID:e.$1(),timeInStep:Date.now()-e.state.stepStartTimeStamp,redirectURI:e.props.redirectURI,allUserScopes:Object.keys(e.props.userScopes),grantedScopes:b("PlatformBusinessStepUtils").getSelectedScopes(e.state.userScopes),allAssetScopes:Object.keys(e.props.assetScopes),grantedAssetScopes:b("PlatformBusinessStepUtils").getSelectedScopes(e.state.assetScopes),allAssets:Object.keys(e.props.assets),grantedAssets:b("PlatformBusinessStepUtils").getSelectedAssets(e.state.assets)};b("PlatformBusinessAppAuthLogger").logEvent(c);e.setState(function(b,c){b.saveData=a;return b});e.advanceStep(!0)},e.$15=function(a){e.setState({shouldHideFooter:a})},e.$16=function(a){e.setState({shouldDisableNext:a})},d)||babelHelpers.assertThisInitialized(e)}var d=a.prototype;d.componentDidMount=function(){var a=this,c={event:"dialog_show",appID:this.props.application.id,loggerID:this.props.loggerID,dialogPurpose:this.props.dialogPurpose,display:this.props.display,stepID:this.$1(),timeInStep:Date.now()-this.state.stepStartTimeStamp,redirectURI:this.props.redirectURI,allUserScopes:Object.keys(this.props.userScopes),grantedScopes:b("PlatformBusinessStepUtils").getSelectedScopes(this.state.userScopes),allAssetScopes:Object.keys(this.props.assetScopes),grantedAssetScopes:b("PlatformBusinessStepUtils").getSelectedScopes(this.state.assetScopes),allAssets:Object.keys(this.props.assets),grantedAssets:b("PlatformBusinessStepUtils").getSelectedAssets(this.state.assets)};b("PlatformBusinessAppAuthLogger").logEvent(c);"user"===this.$1()&&b("PlatformOAuthDialogLoginFunnelLogger").log("client_oauth_dialog_init_impression",this.$2(),this.props.loggerID,!0,"business");if(this.state.saveData.success&&this.props.dialogPurpose==="autoclose"){c={event:"auto_close",appID:this.props.application.id,loggerID:this.props.loggerID,dialogPurpose:this.props.dialogPurpose,display:this.props.display,stepID:this.$1(),timeInStep:Date.now()-this.state.stepStartTimeStamp,redirectURI:this.props.redirectURI,allUserScopes:Object.keys(this.props.userScopes),grantedScopes:b("PlatformBusinessStepUtils").getSelectedScopes(this.state.userScopes),allAssetScopes:Object.keys(this.props.assetScopes),grantedAssetScopes:b("PlatformBusinessStepUtils").getSelectedScopes(this.state.assetScopes),allAssets:Object.keys(this.props.assets),grantedAssets:b("PlatformBusinessStepUtils").getSelectedAssets(this.state.assets)};b("PlatformBusinessAppAuthLogger").logEvent(c);this.$3()}else this.$4();window.addEventListener("beforeunload",function(){var c={event:"dialog_close",appID:a.props.application.id,loggerID:a.props.loggerID,dialogPurpose:a.props.dialogPurpose,display:a.props.display,stepID:a.$1(),timeInStep:Date.now()-a.state.stepStartTimeStamp,redirectURI:a.props.redirectURI,allUserScopes:Object.keys(a.props.userScopes),grantedScopes:b("PlatformBusinessStepUtils").getSelectedScopes(a.state.userScopes),allAssetScopes:Object.keys(a.props.assetScopes),grantedAssetScopes:b("PlatformBusinessStepUtils").getSelectedScopes(a.state.assetScopes),allAssets:Object.keys(a.props.assets),grantedAssets:b("PlatformBusinessStepUtils").getSelectedAssets(a.state.assets)};b("PlatformBusinessAppAuthLogger").logEvent(c);return void 0});c=function(){Date.now()-a.state.stepStartTimeStamp>b("DateConsts").MS_PER_HOUR&&a.cancel("auto_close")};window.addEventListener("focus",c);window.addEventListener("blur",c);window.setTimeout(function(){a.cancel("auto_close")},b("DateConsts").MS_PER_HOUR);document.addEventListener("keydown",this.escFunction,!1)};d.componentWillUnmount=function(){document.addEventListener("keydown",this.escFunction,!1)};d.cancel=function(c){c===void 0&&(c="cancel");c={event:c,appID:this.props.application.id,loggerID:this.props.loggerID,dialogPurpose:this.props.dialogPurpose,display:this.props.display,stepID:this.$1(),timeInStep:Date.now()-this.state.stepStartTimeStamp,redirectURI:this.props.redirectURI,allUserScopes:Object.keys(this.props.userScopes),grantedScopes:b("PlatformBusinessStepUtils").getSelectedScopes(this.state.userScopes),allAssetScopes:Object.keys(this.props.assetScopes),grantedAssetScopes:b("PlatformBusinessStepUtils").getSelectedScopes(this.state.assetScopes),allAssets:Object.keys(this.props.assets),grantedAssets:b("PlatformBusinessStepUtils").getSelectedAssets(this.state.assets)};b("PlatformBusinessAppAuthLogger").logEvent(c);c=b("XPlatformBusinessOauthDialogCloseController").getURIBuilder().setString("version",this.props.version).setString("logger_id",this.props.loggerID).setStringVector("user_scopes",Object.keys(this.props.userScopes)).setEnumVector("asset_scopes",Object.keys(this.props.assetScopes)).setFBID("app_id",this.props.application.id).setString("redirect_state",this.props.redirectState).setString("redirect_uri",this.props.redirectURI.toString()).setString("fallback_redirect_uri",(c=this.props.fallbackRedirectURI)==null?void 0:c.toString()).setEnumVector("response_types",this.props.responseTypes).setEnum("display",this.props.display).setEnum("action","cancel").setBool("return_scopes",this.props.returnScopes).setEnum("sso_device",this.props.ssoDevice).setEnumVector("return_format",this.props.returnFormat).getURI();a.closeDialog(c)};d.$2=function(){if(null!=this.state.clientBaselineTime)return this.state.clientBaselineTime;var b=a.getCbtFromQuery();this.setState({clientBaselineTime:b});return b};a.getCbtFromQuery=function(){var a=Date.now();try{var c=b("QueryString").decode(window.location.href).cbt;if(null!=c)try{a=parseInt(c,10)}catch(a){b("FBLogger")("platform_login_web_funnel_client_js").mustfix("business login failed to parse cbt")}}catch(a){b("FBLogger")("platform_login_web_funnel_client_js").mustfix("business login failed to generate cbt")}return a};d.$1=function(){return this.state.steps[this.state.currentStepIndex].id};d.advanceStep=function(a){var c=this;a===void 0&&(a=!0);this.setState(function(d,e){if(d.currentStepIndex<d.steps.length-1){if(a){e={event:"next",appID:e.application.id,loggerID:e.loggerID,dialogPurpose:c.props.dialogPurpose,display:c.props.display,stepID:d.steps[d.currentStepIndex].id,timeInStep:Date.now()-d.stepStartTimeStamp,redirectURI:e.redirectURI,allUserScopes:Object.keys(e.userScopes),grantedScopes:b("PlatformBusinessStepUtils").getSelectedScopes(d.userScopes),allAssetScopes:Object.keys(c.props.assetScopes),grantedAssetScopes:b("PlatformBusinessStepUtils").getSelectedScopes(c.state.assetScopes),allAssets:Object.keys(e.assets),grantedAssets:b("PlatformBusinessStepUtils").getSelectedAssets(d.assets)};b("PlatformBusinessAppAuthLogger").logEvent(e)}d.steps[d.currentStepIndex].contentView=c.refs[d.steps[d.currentStepIndex].id];d.currentStepIndex+=1;d.stepStartTimeStamp=Date.now();c.shouldShowStep(d.currentStepIndex)||c.advanceStep(!1)}return d})};d.retreatStep=function(a){var c=this;a===void 0&&(a=!0);this.setState(function(d,e){if(d.currentStepIndex>0){if(a){e={event:"back",appID:e.application.id,loggerID:e.loggerID,dialogPurpose:c.props.dialogPurpose,display:c.props.display,stepID:d.steps[d.currentStepIndex].id,timeInStep:Date.now()-d.stepStartTimeStamp,redirectURI:e.redirectURI,allUserScopes:Object.keys(e.userScopes),grantedScopes:b("PlatformBusinessStepUtils").getSelectedScopes(d.userScopes),allAssetScopes:Object.keys(c.props.assetScopes),grantedAssetScopes:b("PlatformBusinessStepUtils").getSelectedScopes(c.state.assetScopes),allAssets:Object.keys(e.assets),grantedAssets:b("PlatformBusinessStepUtils").getSelectedAssets(d.assets)};b("PlatformBusinessAppAuthLogger").logEvent(e)}d.currentStepIndex-=1;d.steps[d.currentStepIndex].contentView=null;d.stepStartTimeStamp=Date.now();c.shouldShowStep(d.currentStepIndex)||c.retreatStep(!1)}return d})};d.getStepsWithProgress=function(){var a=this;return this.state.steps.filter(function(b,c){return b.id!=="user"&&b.id!=="finish"&&b.shouldShow(a.getContext())})};d.shouldShowStep=function(a){return this.state.steps[a].shouldShow(this.getContext())};d.hasMoreStepsToShow=function(a){var b=this;a===void 0&&(a=!0);return this.state.steps.some(function(c,d){return d>b.state.currentStepIndex&&(!a||d<b.state.steps.length-2)&&c.shouldShow(b.getContext())})};d.$10=function(a,b,c){for(var d in a){var e=a[d];e.managedAssetType===b&&(a[d]=babelHelpers["extends"]({},e,{managedAssetIDs:[].concat(e.managedAssetIDs,[c])}))}return a};d.$9=function(a,b){for(var c in b){var d=b[c],e=d.managedAssetIDs.filter(function(b){return a.indexOf(b)>-1});d.managedAssetIDs.length>0&&(b[c].checked=e.length!=0,b[c].disabled=e.length==0)}};d.getContext=function(){return{loggerID:this.props.loggerID,user:this.props.user,application:this.props.application,userScopes:this.state.userScopes,assetScopes:this.state.assetScopes,assets:this.state.assets,requestExtras:this.props.requestExtras}};d.getFrameworkContext=function(){return{loggerID:this.props.loggerID,version:this.props.version,display:this.props.display,responseTypes:this.props.responseTypes,returnScopes:this.props.returnScopes,steps:this.state.steps,onSelectedScopesChanged:this.$13,onSelectedAssetsChanged:this.$12,onSaveComplete:this.$14,redirectURI:this.props.redirectURI,redirectState:this.props.redirectState,saveData:this.state.saveData,dialogPurpose:this.props.dialogPurpose}};d.render=function(){var c=this.state.steps[this.state.currentStepIndex],d=this.renderHeader(),e=this.renderFooter(),f=c.component;f=h.jsx(f,{context:this.getContext(),stepStartTimeStamp:this.state.stepStartTimeStamp,data:c.data,stepController:this.state.steps[this.state.currentStepIndex],hideFooterHandler:this.$15,disableNextHandler:this.$16,retreatStep:this.$7,advanceStep:this.$6,finish:this.$3,selectAsset:this.$8,addAsset:this.$11,cancelOnClick:this.cancelOnClick,redirectURI:this.props.redirectURI,ref:this.$1(),frameworkContext:this.getFrameworkContext()});c=b("PlatformBusinessOauthDialogComponents").renderWrappedContent(this.state,this.state.currentStepIndex,f);return b("PlatformBusinessOauthDialogComponents").renderDialogContainer(this.props,a.hiddenCloseFormRef,d,c,e)};d.renderHeader=function(){var a,c=(a=b("PlatformBusinessOauthDialogComponents")).renderAppLogoView(this.props.application.logoUrl),d=a.renderHeaderCancelButton(this.cancelOnClick),e=this.state.steps[this.state.currentStepIndex].id,f=this.getStepsWithProgress(),g=f.findIndex(function(a){a=a.id;return a===e});f=a.renderProgressBar(this.state,f.length,g+1);g=a.renderLogoutSelector(this.state,this.props,this.$1());return h.jsxs("div",{children:[h.jsxs("div",{className:"_8e3l",children:[c,g,d]}),f]})};d.renderFooter=function(){return b("PlatformBusinessOauthDialogComponents").renderFooter(this.props,this.state,this.$1(),this.hasMoreStepsToShow(!0),this.$7,this.$6,this.$5,this.cancelOnClick)};d.$4=function(){var a=this;this.state.steps.map(function(b,c){b.loaded||b.prefetchData(a.getContext(),function(b){a.setState(function(a,d){a.steps[c].data=b;a.steps[c].loaded=!0;return a})})})};return a}(h.Component);e.exports=i;i.hiddenCloseFormRef=h.createRef();i.closeDialog=function(a){var b=i.hiddenCloseFormRef.current;b!==null&&(b.action=a.toString(),b.submit())}}),null);