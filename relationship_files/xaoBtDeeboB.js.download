if (self.CavalryLogger) { CavalryLogger.start_js(["q8NFy"]); }

__d("UFI2InsertGIFButton.react",["cx","AsyncRequest","ChatContentSearchFlyout.react","ContextualLayerAutoFlip","LayerTabIsolation","MessengerPlatformInterfaceType","React","UFI2LinkWrapper.react","XUFICommentGIFPreprocessController","XUIContextualDialog.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerPlatformInterfaceType").FB_INTERFACE,i=b("React"),j=function(c){babelHelpers.inheritsLoose(a,c);function a(){var a,b;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=b=c.call.apply(c,[this].concat(e))||this,b.state={locked:!1,visible:Boolean(b.props.initiallyVisible)},b.$2=function(a){a.preventDefault(),a.stopPropagation(),b.setState(function(a){return{locked:!1,visible:a.locked?!1:!a.visible}})},b.$3=function(){b.setState({visible:!1})},b.$4=function(){var a;b.$3();(a=b.props).onGIFSelected.apply(a,arguments)},b.$5=function(a){b.$1=a,b.props.onFocusableElementRefChange&&b.props.onFocusableElementRefChange(b.$1)},b.$6=function(a){b.setState(function(a){return{locked:a.visible}})},a)||babelHelpers.assertThisInitialized(b)}var d=a.prototype;d.componentDidUpdate=function(){this.props.onTogglePopover&&this.props.onTogglePopover(this.state.visible)};d.render=function(){var a=this,c=this.state.visible?b("joinClasses")(this.props.iconClassName,this.props.iconActiveClassName):this.props.iconClassName;return i.jsxs(i.Fragment,{children:[i.jsx(b("UFI2LinkWrapper.react"),{"aria-label":this.props.label,className:this.props.buttonClassName,linkRef:this.$5,onClick:this.$2,onDragStart:function(a){return a.preventDefault()},onMouseDown:this.$6,role:"button",children:i.jsx("div",{className:c})}),this.state.visible?i.jsx(b("XUIContextualDialog.react"),{alignment:"right",behaviors:{ContextualLayerAutoFlip:b("ContextualLayerAutoFlip"),LayerTabIsolation:b("LayerTabIsolation")},className:"_42pu",contextRef:function(){return a.$1},hasActionableContext:!0,label:this.props.label,onBlur:this.$3,onToggle:this.$3,position:"above",shown:!0,width:278,children:i.jsx(b("ChatContentSearchFlyout.react"),{ftentidentifier:this.props.ftentidentifier,onEscKeyDown:this.$3,onSelect:this.$4,searchInterface:h,shown:!0})}):null]})};return a}(i.PureComponent);j.defaultProps={initiallyVisible:!1};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){new(b("AsyncRequest"))(b("XUFICommentGIFPreprocessController").getURIBuilder().getURI()).setData({gif_url:a.source.url}).send(),d.props.onComposerStateChange(function(b){return{attachment:{__type:"GIF",data:a}}})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props;a.onComposerStateChange;a=babelHelpers.objectWithoutPropertiesLoose(a,["onComposerStateChange"]);return i.jsx(j,babelHelpers["extends"]({},a,{onGIFSelected:this.$1}))};return c}(i.Component);e.exports=a}),null);