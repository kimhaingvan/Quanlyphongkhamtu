if (self.CavalryLogger) { CavalryLogger.start_js(["peIVa"]); }

__d("WebCommentComposerInteractionTrackingCommentSubmittedFalcoEvent",["FalcoLoggerInternal","getSamplingPolicyConfig_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getSamplingPolicyConfig_DO_NOT_USE")("falco","web_comment_composer_interaction_tracking_comment_submitted");c=b("FalcoLoggerInternal").create(a);e.exports=c}),null);
__d("createUFI2InteractionTrackingComposerPlugin",["React","WebCommentComposerInteractionTrackingCommentSubmittedFalcoEvent","createUFI2ComposerPlugin","performanceNow"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(){return function(a){var c="",d={avg_delay_between_updates:0,did_click:!1,did_delete:!1,did_mouse_over:!1,did_press_modifier_key:!1},e=null,f,i=0,j=null,k=null;function l(l){var m,n=l.inputProps,o=n.composerState,p=n.depth,q=n.keyBindingFn,r=n.onClick,s=n.onCommit,t=n.onFocus,u=babelHelpers.objectWithoutPropertiesLoose(n,["composerState","depth","keyBindingFn","onClick","onCommit","onFocus"]);n=babelHelpers.objectWithoutPropertiesLoose(l,["inputProps"]);var v=h.useCallback(function(a){switch(a.key){case"Alt":case"Control":case"Meta":case"Shift":case"CapsLock":d.did_press_modifier_key=!0;break;case"Backspace":d.did_delete=!0;break}return q&&q(a)},[q]),w=h.useCallback(function(a){d.did_click=!0;return r&&r(a)},[r]),x=h.useCallback(function(){var a,f=(a=o.attachment)==null?void 0:a.__type,h=c.trim();if(f!=null||h.length>0){var l=(g||(g=b("performanceNow")))();b("WebCommentComposerInteractionTrackingCommentSubmittedFalcoEvent").log(function(){return babelHelpers["extends"]({},d,{attachment_type:f,avg_delay_between_updates:Math.round(d.avg_delay_between_updates).toString(),comment_char_length:h.length.toString(),comment_word_length:h.length>0?h.trim().split(/\s+/).length.toString():"0",composer_depth:p.toString(),total_time_from_first_char:Math.round(j==null?0:l-j).toString(),total_time_from_focus:Math.round(k==null?0:l-k).toString()})});d=babelHelpers["extends"]({},d,{avg_delay_between_updates:0,did_delete:!1,did_press_modifier_key:!1});e=null;i=0;j=null;k=l}return s&&s()},[(l=o.attachment)==null?void 0:l.__type,p,s]);l=h.useCallback(function(){d.did_mouse_over=!0});var y=h.useCallback(function(a){var d;(k==null||c.length===0&&((d=o.attachment)==null?void 0:d.__type)==null)&&(k=(g||(g=b("performanceNow")))());return t&&t(a)},[(m=o.attachment)==null?void 0:m.__type,t]);m=(g||(g=b("performanceNow")))();var z=o.inputState;z=z.__type==="editor-state-based"?z.editorState.getCurrentContent().getPlainText():z.text;z!==c&&(c=z,(z!==""||i>0)&&(i++,f=m,e==null&&(e=m),j==null&&(j=m),d.avg_delay_between_updates=i>0?(f-e)/i:0));z=h.useMemo(function(){return babelHelpers["extends"]({},u,{composerState:o,depth:p,keyBindingFn:v,onClick:w,onCommit:x,onFocus:y})},[o,p,v,w,x,u]);return h.jsx("div",{onMouseOver:l,children:h.jsx(a,babelHelpers["extends"]({},n,{inputProps:z}))})}return b("createUFI2ComposerPlugin")(l)}}}),null);